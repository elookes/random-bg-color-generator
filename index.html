<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>Random Background Color</title>
  <script>

      function setValue(v){
          if (typeof(Storage) !== "undefined") {
              var listOfValues = getUsedValues();
              listOfValues.push(v);
              localStorage.setItem("used", JSON.stringify(listOfValues));
          }else{
              used.push(v);
          }
      }


      function getUsedValues(){
          if (typeof(Storage) !== "undefined") {
              var a=  JSON.parse(localStorage.getItem("used")) || [];
              console.log(a);
              return a;
          }else{
              return []
          }
      }

      var used = getUsedValues();



      var limit = 10;
      function getRandomColor() {
          var length = 6;
          var chars = '0123456789ABCDEF';
          var hex = '#';
          while (length--) hex += chars[(Math.random() * 16) | 0];
          if (getUsedValues().indexOf(hex) == -1) {
              setValue(hex);
              return hex;
          }
          return getRandomColor();
      }

      function createElement(color) {
          var el = document.createElement("div");
          el.className = 'color';
          el.innerHTML = color;
          return el
      }

      function addElementToWrapper(el) {
          try{
              document.getElementById('listOfColors').appendChild(el);
          }catch(e){}
      }

      var s;
      s = setInterval(function () {
          var color = getRandomColor();
          document.body.style.backgroundColor = color;
          var el = createElement(color);
          addElementToWrapper(el);
          limit--;
          if (limit < 1) {
              clearInterval(s);
          }
      }, 1000);
  </script>
  <style>
    #listOfColors {
      position: absolute;
      right: 0;
      top: 0;
    }

    .color {
      padding: 10px;
      background: white;
      opacity: 0.6;
      color: #5B5B5B;
    }
  </style>
</head>
<body>
<noscript>You need to enable JavaScript to run this app.</noscript>
<div id="listOfColors"></div>
</body>
</html>
